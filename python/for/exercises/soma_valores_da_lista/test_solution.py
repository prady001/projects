import pytest
from pytest_devlife import util
try:
    import solution
except:
    solution = None
try:
    if solution:
        from solution import soma_valores
except:
    pass


def setup():
    util.function_exists_in_module(solution, 'soma_valores')


lista_testes = [[], [-15], [-15, -14.5], [-15, -14.5, -14.0], [-15, -14.5, -14.0, -13.5], [-15, -14.5, -14.0, -13.5, -13.0], [-15, -14.5, -14.0, -13.5, -13.0, -12.5, -12.0, -11.5, -11.0, -10.5, -10.0, -9.5, -9.0, -8.5, -8.0, -7.5, -7.0, -6.5, -6.0, -5.5, -5.0, -4.5, -4.0, -3.5, -3.0, -2.5, -2.0, -1.5, -1.0, -0.5, 0.0], [-15, -14.5, -14.0, -13.5, -13.0, -12.5, -12.0, -11.5, -11.0, -10.5, -10.0, -9.5, -9.0, -8.5, -8.0, -7.5, -7.0, -6.5, -6.0, -5.5, -5.0, -4.5, -4.0, -3.5, -3.0, -2.5, -2.0, -1.5, -1.0, -0.5, 0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0, 8.5, 9.0, 9.5, 10.0, 10.5], [-15, -14.5, -14.0, -13.5, -13.0, -12.5, -12.0, -
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 11.5, -11.0, -10.5, -10.0, -9.5, -9.0, -8.5, -8.0, -7.5, -7.0, -6.5, -6.0, -5.5, -5.0, -4.5, -4.0, -3.5, -3.0, -2.5, -2.0, -1.5, -1.0, -0.5, 0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0, 8.5, 9.0, 9.5, 10.0, 10.5, 11.0, 11.5, 12.0, 12.5, 13.0, 13.5, 14.0, 14.5, 15.0], [-15, -14.5, -14.0, -13.5, -13.0, -12.5, -12.0, -11.5, -11.0, -10.5, -10.0, -9.5, -9.0, -8.5, -8.0, -7.5, -7.0, -6.5, -6.0, -5.5, -5.0, -4.5, -4.0, -3.5, -3.0, -2.5, -2.0, -1.5, -1.0, -0.5, 0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0, 8.5, 9.0, 9.5, 10.0, 10.5, 11.0, 11.5, 12.0, 12.5, 13.0, 13.5, 14.0, 14.5, 15.0, 15.5]]

somas = [0, -15, -29.5, -43.5, -57.0, -70.0, -232.5, -117.0, 0.0, 15.5]

@pytest.mark.parametrize(
    'lista, soma',
    [
        pytest.param(lista, soma, id=f'lista={lista}, soma={soma}') for lista, soma in zip(lista_testes, somas)
    ]
)
def test_calcula_soma_dos_elementos_da_lista(lista, soma):
    resultado_obtido = soma_valores(lista)
    assert resultado_obtido == pytest.approx(
        soma, abs=1e-2, rel=1e-2
    ), f'Algo deu errado na soma da lista: {lista}.\nEra esperado {soma}, mas obtido foi {resultado_obtido}'
